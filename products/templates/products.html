{%  extends 'base.html' %}
{% load cloudinary %}
{% block content %}
<div class="container">
  <div class="row">
    {% for product in products %}
    <div class="col s4">
      <div class="card">
        <a href="{%  url 'product_detail' product.id %}">
            <div class="product">
              {% cloudinary product.cover width=250 height=250 %}
            </div>
          <div class="card-content">
            <h5>{{ product.album }}</h3>
            <h5>{{ product.artist }}</h4>
        </a>
        <p>{{ product.price }}</p>

        <form action="{% url 'add_to_cart' product.id %}" method="POST">
          {% csrf_token %}
          <div class="input-group">
            <input type="number" min="1" max="25" name="quantity" class="form-control" placeholder="Quantity">
            <span class="input-group-btn">
              <button class="btn waves-effect waves-light" type="submit">Add</button>
            </span>
          </div>
        </form>
      </div>
    </div>
  </div>
  {% endfor %}
</div>
</div>

{% if products.has_other_pages %}
<ul class="pagination">
  {% if products.has_previous %}
  <li><a href="?page={{ products.previous_page_number }}">&laquo;</a></li>
  {% else %}
  <li class="disabled"><span>&laquo;</span></li>
  {% endif %}
  {% for i in products.paginator.page_range %}
  {% if products.number == i %}
  <li class="active"><span>{{ i }}</span></li>
  {% else %}
  <li><a href="?page={{ i }}">{{ i }}</a></li>
  {% endif %}
  {% endfor %}
  {% if products.has_next %}
  <li><a href="?page={{ products.next_page_number }}">&raquo;</a></li>
  {% else %}
  <li class="disabled"><span>&raquo;</span></li>
  {% endif %}
</ul>
{% endif %}

{% endblock %}